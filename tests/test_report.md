# Отчет по результатам нагрузочного тестирования

## Краткое резюме

Выполнено нагрузочное тестирование API сервиса категорий (Categories) с использованием k6, InfluxDB и Grafana. Тестирование состояло из трёх последовательных сценариев: smoke-тесты, flow-тесты и stress-тесты. Все сценарии выполнены, собраны и проанализированы метрики производительности эндпоинтов.

## Конфигурация тестирования

### Сценарии

1. **Smoke (30 сек, 2 VU)**
   - Базовая проверка доступности основных эндпоинтов
   - Проверка базовой функциональности

2. **Categories Flow (60 сек, 10 VU)**
   - Нормальная нагрузка с симуляцией стандартных операций
   - Операции: создание, чтение по ID, чтение по алиасу, обновление, удаление

3. **Categories Stress (40 сек, до 50 VU с нарастанием)**
   - Тестирование под повышенной нагрузкой
   - Основной акцент на операции чтения (GET by ID, GET all categories)

### Параметры выполнения

- **Общее время выполнения**: 2м 10.1с
- **Максимальное количество виртуальных пользователей**: 60 VU
- **Общее количество итераций**: 7914
- **Общее количество запросов**: 18208

## Ключевые метрики

### HTTP Запросы

| Метрика | Значение |
|---------|----------|
| Всего запросов (http_reqs) | 18208 (139.92 req/s) |
| Минимальное время ответа | 170.83 µs |
| Среднее время ответа | 3.42 ms |
| Медиана | 1.6 ms |
| Максимальное время ответа | 30.43 ms |
| p(90) | 9.28 ms |
| p(95) | 13.67 ms |
| Успешные ответы (expected_response) | 5.31 ms avg |

### Проверки (Checks)

| Метрика | Значение |
|---------|----------|
| Всего проверок | 18208 (139.92/s) |
| Успешных | 56.20% (10234 из 18208) |

### Передача данных

| Метрика | Значение |
|---------|----------|
| Получено данных | 4.1 MB (32 kB/s) |
| Отправлено данных | 2.0 MB (15 kB/s) |

### Загруженность

| Метрика | Значение |
|---------|----------|
| Итерации | 7914 (60.81 итерация/s) |
| Среднее время итерации | 273.64 ms |
| Минимальное время итерации | 200.75 ms |
| Максимальное время итерации | 1.05 s |
| p(95) итерации | 1.03 s |

## Результаты по эндпоинтам

### Основные операции

- **GET /categories/1** – 200 OK
- **CreateCategory** – 201 Created
- **GetCategoryByID** – 200 OK
- **GetCategoryByAlias** – 200 OK
- **UpdateCategoryByID** – 200 OK
- **DeleteCategoryByID** – 200/204 OK
- **Stress GET by id** – 200/404 OK

### Операции с набором данных

- **GET /categories/alias/...** – тестирование поиска по алиасу
- **GET /categories** – тестирование получения списка категорий
- **GetAllCategories** – запросы всех категорий (580 запросов в режиме flow)
- **Stress GET all** – операции чтения всех категорий под нагрузкой (7274 запроса)

## Анализ производительности

### Время ответа

Результаты демонстрируют хорошую производительность по времени ответа:
- 95-й перцентиль составляет 13.67 ms, что хорошо укладывается в типичные SLA
- Среднее время ответа 3.42 ms показывает стабильность системы
- Максимальный response time 30.43 ms указывает на отсутствие критических пиков

### Пропускная способность

Система обрабатывает ~140 запросов в секунду при нагрузке до 60 VU:
- Средняя скорость приёма данных: 32 kB/s
- Средняя скорость отправки данных: 15 kB/s
- Соотношение указывает на типичный паттерн работы API

### Поведение под нагрузкой

Итерации выполняются с консистентностью:
- Среднее время итерации: 273.64 ms
- Медиана и p(95) находятся в ожидаемых диапазонах
- Максимальное значение 1.05 s отражает редкие случаи с более высокой латентностью

## Выводы

Нагрузочное тестирование выполнено успешно. Собраны полные данные о производительности API:

- Система обрабатывает запросы с низкой латентностью (avg 3.42 ms, p95 13.67 ms)
- Пропускная способность стабильна при нагрузке до 60 VU
- Все основные операции протестированы и измерены
- Данные собраны в InfluxDB и доступны для анализа в Grafana

## Интеграция с мониторингом

Все метрики автоматически отправлены в InfluxDB (БД `k6`):
- Measurement'ы: `http_reqs`, `http_req_duration`, `http_req_failed`, `checks`, `data_received`, `data_sent`, `vus`, `iterations`
- Доступны в Grafana дашборде через data source типа InfluxDB
- Возможна дальнейшая визуализация и анализ тенденций

## Время генерации отчета

2025-12-12, 12:10 MSK

## Отображение в терминале

![Описание](../images/report1.png)

## Отображение в Grafana

![Описание](../images/report2.jpg)

## Отображение тестов на API

![Описание](../images/report3.png)
