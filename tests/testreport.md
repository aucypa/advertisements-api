# Отчет по результатам ручного тестирования
## Краткое резюме

Выполнено ручное тестирование API сервиса Advertisements, Users, Categories и Search с использованием curl и gRPC (grpcurl). Тестирование включало проверку доступности сервисов, регистрацию пользователей, работу с объявлениями и категориями, поиск по заголовку. Все основные операции проверены на корректность работы и возврат ожидаемых данных.

## Конфигурация тестирования
### 1. Проверка поднятия сервисов

- Проверка статуса контейнеров через docker compose ps

- Проверка доступности эндпоинтов через curl http://localhost:<port>

- Подтверждено, что все сервисы подняты и слушают свои порты

#### Проверяемые сервисы:

- ads-service 

- advertisements-storage 

- api-gateway 

- category-service 

- search-service 

- users-service 

- grafana

- influxdb

- postgres 

### 2. Users Service
| Тест / Эндпоинт | Описание | Ожидаемый результат | Фактический результат |
|-----------------|----------|---------------------|-----------------------|
| RegisterUser (POST /users/register) | Создание нового пользователя с обязательными полями (email, password, first_name, last_name) | Возвращается `id` нового пользователя | При успешном выполнении возвращается `id`, полученный от `storageClient.RegisterUser`. Валидация входных данных отсутствует. Поле `last_name` фактически не используется — в метод передаётся `first_name` дважды (обнаружен дефект). |
| LoginUser (POST /users/login) | Авторизация пользователя с корректными данными | Возвращается `access_token` | При корректных `email` и `password` возвращается `access_token`, сформированный на уровне storage-сервиса. Ошибки аутентификации пробрасываются без дополнительной обработки. |
| GetAllUsers (GET /users) | Получение списка всех пользователей | Список пользователей | Возвращается список пользователей, полученный от `storageClient.GetAllUsers`. Дополнительная фильтрация и пагинация отсутствуют. |
| GetUserByID (GET /users/{id}) | Получение информации о пользователе по ID | Данные пользователя с указанным ID | Возвращается пользователь по `id`, полученный из storage-слоя. При отсутствии пользователя возвращается ошибка, проброшенная из storage. |
| UpdateUserById (PUT /users/{id}) | Обновление данных пользователя | Данные пользователя обновлены | Обновление выполняется через `storageClient.UpdateUserById`. Используется поле `password_hash`, а не `password`. Частичное обновление не реализовано — все поля передаются напрямую. |
| DeleteUserById (DELETE /users/{id}) | Удаление пользователя | Пользователь удалён | Пользователь удаляется через `storageClient.DeleteUserById`. Ответ полностью формируется storage-слоем и возвращается без изменений. |

### 3. Categories Service
| Тест / Эндпоинт | Описание | Ожидаемый результат | Фактический результат |
|-----------------|----------|---------------------|-----------------------|
| CreateCategory (POST /categories) | Создание категории с полями `name` и `alias` | Возвращается `id` новой категории | При успешном выполнении возвращается `id`, полученный от `storageClient.CreateCategory`. Валидация входных данных на уровне сервиса отсутствует. |
| GetCategoryById (GET /categories/{id}) | Получение категории по ID | Информация о категории | Возвращается категория, полученная от `storageClient.GetCategoryById`. При отсутствии категории возвращается ошибка storage-слоя. |
| GetCategoryByAlias (GET /categories/alias/{alias}) | Получение категории по алиасу | Информация о категории | Возвращается категория, полученная от `storageClient.GetCategoryByAlias`. Дополнительная обработка результата отсутствует. |
| GetAllCategories (GET /categories) | Получение списка всех категорий | Список категорий | Возвращается список категорий, полученный от `storageClient.GetAllCategories`. Фильтрация и пагинация не реализованы. |
| UpdateCategoryById (PUT /categories/{id}) | Обновление категории | Категория обновлена | Обновление выполняется через `storageClient.UpdateCategory`. Все поля (`name`, `alias`) передаются напрямую без проверки. |
| DeleteCategoryById (DELETE /categories/{id}) | Удаление категории | Категория удалена | Удаление выполняется через `storageClient.DeleteCategory`. Ответ полностью формируется storage-слоем и возвращается без изменений. |

### 4. Search Service
| Тест / Эндпоинт | Описание | Ожидаемый результат | Фактический результат |
|-----------------|----------|---------------------|-----------------------|
| SearchAdvertisementByTitle (GET /ads/search?title={title}) | Поиск объявлений по заголовку | Возвращается список объявлений с указанным заголовком | Поиск выполняется через `storageClient.SearchByTitle` с передачей параметра `title`. Возвращается список объявлений, полученный из storage-слоя. Валидация входного параметра отсутствует. При ошибке storage-слоя ошибка пробрасывается напрямую. |

### 5. Advertisements Service
| Тест / Эндпоинт                        | Описание                                                     | Ожидаемый результат                       |
|----------------------------------------|---------------------------------------------------------------|------------------------------------------|
| CreateAdvertisement (POST /ads)        | Создание объявления с полями title, description, price, currency, category_id, user_id | Возвращается `id` объявления             |
| GetAdvertisementById (GET /ads/{id})   | Получение объявления по ID                                     | Информация об объявлении                  |
| GetAllAdvertisements (GET /ads)        | Получение списка всех объявлений                               | Список объявлений                         |
| UpdateAdvertisementById (PUT /ads/{id}) | Обновление объявления                                         | Данные объявления обновлены                |
| DeleteAdvertisementByID (DELETE /ads/{id}) | Удаление объявления                                           | Объявление удалено                        |
# Анализ работы сервисов

Все сервисы подняты и доступны по своим портам

gRPC запросы через grpcurl успешно выполняются для регистрации пользователя и создания объявления

REST-запросы через curl возвращают ожидаемые ответы (201/200 OK)

Основные CRUD-операции проверены на Users, Ads и Categories

# Выводы

Ручное тестирование выполнено успешно

Основные эндпоинты проверены на корректность работы

Система готова к интеграционному и нагрузочному тестированию

Все результаты можно задокументировать в GitHub (manual_test_report.md) и ссылаться на них в README.md
